<!DOCTYPE html>
<html lang="en">
<head>
    <title>clipboard.js</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="../../../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../../css/github.css" type="text/css" media="screen" />
<script src="../../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>
    <div class="banner">
        
        <h1>
            clipboard.js
        </h1>
        <ul class="files">
            
            <li>
                node_modules/clipboard/src/clipboard.js
                
            </li>
            <li>Last modified: 2018-11-21 17:20:08 -0200</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>import ClipboardAction from &#39;./clipboard-action&#39;; import Emitter
from &#39;tiny-emitter&#39;; import listen from &#39;good-listener&#39;;</p>

<pre><code>Base class which takes one or more elements, adds event listeners to them,
and instantiates a new `ClipboardAction` on each click.
</code></pre>

<p>class Clipboard extends Emitter {</p>

<pre><code>/**
   @param {String|HTMLElement|HTMLCollection|NodeList} trigger
   @param {Object} options
  /
constructor(trigger, options) {
    super();

    this.resolveOptions(options);
    this.listenClick(trigger);
}

/**
   Defines if attributes would be resolved using internal setter functions
   or custom functions that were passed in the constructor.
   @param {Object} options
  /
resolveOptions(options = {}) {
    this.action    = (typeof options.action    === &#39;function&#39;) ? options.action    : this.defaultAction;
    this.target    = (typeof options.target    === &#39;function&#39;) ? options.target    : this.defaultTarget;
    this.text      = (typeof options.text      === &#39;function&#39;) ? options.text      : this.defaultText;
    this.container = (typeof options.container === &#39;object&#39;)   ? options.container : document.body;
}

/**
   Adds a click event listener to the passed trigger.
   @param {String|HTMLElement|HTMLCollection|NodeList} trigger
  /
listenClick(trigger) {
    this.listener = listen(trigger, &#39;click&#39;, (e) =&gt; this.onClick(e));
}

/**
   Defines a new `ClipboardAction` on each click event.
   @param {Event} e
  /
onClick(e) {
    const trigger = e.delegateTarget || e.currentTarget;

    if (this.clipboardAction) {
        this.clipboardAction = null;
    }

    this.clipboardAction = new ClipboardAction({
        action    : this.action(trigger),
        target    : this.target(trigger),
        text      : this.text(trigger),
        container : this.container,
        trigger   : trigger,
        emitter   : this
    });
}

/**
   Default `action` lookup function.
   @param {Element} trigger
  /
defaultAction(trigger) {
    return getAttributeValue(&#39;action&#39;, trigger);
}

/**
   Default `target` lookup function.
   @param {Element} trigger
  /
defaultTarget(trigger) {
    const selector = getAttributeValue(&#39;target&#39;, trigger);

    if (selector) {
        return document.querySelector(selector);
    }
}

/**
   Returns the support of the given action, or all actions if no action is
   given.
   @param {String} [action]
  /
static isSupported(action = [&#39;copy&#39;, &#39;cut&#39;]) {
    const actions = (typeof action === &#39;string&#39;) ? [action] : action;
    let support = !!document.queryCommandSupported;

    actions.forEach((action) =&gt; {
        support = support &amp;&amp; !!document.queryCommandSupported(action);
    });

    return support;
}

/**
   Default `text` lookup function.
   @param {Element} trigger
  /
defaultText(trigger) {
    return getAttributeValue(&#39;text&#39;, trigger);
}

/**
   Destroy lifecycle.
  /
destroy() {
    this.listener.destroy();

    if (this.clipboardAction) {
        this.clipboardAction.destroy();
        this.clipboardAction = null;
    }
}
</code></pre>

<p>}</p>

<p>/**</p>

<pre><code> Helper function to retrieve attribute value.
 @param {String} suffix
 @param {Element} element
/
</code></pre>

<p>function getAttributeValue(suffix, element) {</p>

<pre><code>const attribute = `data-clipboard-${suffix}`;

if (!element.hasAttribute(attribute)) {
    return;
}

return element.getAttribute(attribute);
</code></pre>

<p>}</p>

<p>module.exports = Clipboard;</p>

    </div>
  


  


  
  


  


  

  



  

    

    

    


    


    <!-- Methods -->
    
    
    
  
</div>

    </div>
  </body>
</html>
